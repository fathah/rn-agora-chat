{"version":3,"names":["_Base","require","_Consts","_ErrorHandler","_Native","_ChatConst","_ChatContact","_ChatCursorResult","_ChatError","ChatContactManager","BaseManager","TAG","constructor","_contactListeners","Set","_contactSubscriptions","Map","setNativeListener","event","chatlog","log","forEach","value","remove","clear","set","MTonContactChanged","addListener","params","invokeContactListener","listener","_listener$onContactAd","_listener$onContactDe","_listener$onContactIn","_listener$onFriendReq","_listener$onFriendReq2","contactEventType","type","onContactAdded","call","username","onContactDeleted","onContactInvited","reason","onFriendRequestAccepted","onFriendRequestDeclined","ExceptionHandler","getInstance","sendExcept","except","ChatException","code","description","from","addContactListener","add","removeContactListener","delete","removeAllContactListener","addContact","userId","arguments","length","undefined","r","Native","_callMethod","MTaddContact","checkErrorFromResult","deleteContact","keepConversation","MTdeleteContact","getAllContactsFromServer","MTgetAllContactsFromServer","ret","getAllContactsFromDB","MTgetAllContactsFromDB","addUserToBlockList","MTaddUserToBlockList","removeUserFromBlockList","MTremoveUserFromBlockList","getBlockListFromServer","MTgetBlockListFromServer","getBlockListFromDB","MTgetBlockListFromDB","acceptInvitation","MTacceptInvitation","declineInvitation","MTdeclineInvitation","getSelfIdsOnOtherPlatform","MTgetSelfIdsOnOtherPlatform","getAllContacts","MTgetAllContacts","list","i","push","ChatContact","getContact","MTgetContact","g","fetchAllContacts","MTfetchAllContacts","fetchContacts","cursor","pageSize","MTfetchContacts","ChatCursorResult","opt","map","param","setContactRemark","contact","MTsetContactRemark","remark","exports"],"sourceRoot":"../../src","sources":["ChatContactManager.ts"],"mappings":"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"}